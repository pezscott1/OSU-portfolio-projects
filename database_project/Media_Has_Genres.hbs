<h1>Media Genres</h1>

{{! READ table }}
<table>
    <thead>
        {{! For the table header row, we print the DB attribute names }}
        <tr>
            {{#each media_genres.[0]}}
            <th>
                {{@key}}
            </th>
            {{/each}}
            <th>delete</th>
        </tr>
    </thead>
<tbody>
  {{#each media_genres}}
    <tr>
      <td>{{this.id_media}}</td>
      <td>{{this.id_genre}}</td>
      <td>{{this.title}}</td>
      <td>{{this.genre}}</td>
      <td>
        <form method="POST" action="/Media_Has_Genres/delete">
          <input type="hidden" name="delete_media_id" value="{{this.id_media}}" />
          <input type="hidden" name="delete_genre_id" value="{{this.id_genre}}" />
            <button type='submit' onclick="return confirm('Are you sure you want to delete this mediaGenre?');">
                Delete
            </button>

        </form>
      </td>
    </tr>
  {{/each}}
</tbody>
</table>

{{! CREATE form}}

    <h2>Create media-genre relationship</h2>
    <form class='cuForm' id='create_media_genre_form' method='POST' action='/Media_Has_Genres/create'>
    <label for='create_media_id'>Media to add relationship: </label>
    <select name='create_media_id' id='create_media_id' required>
        <option value='' disabled selected>Select Media</option>
        {{#each titles}}
        <option value='{{this.id_media}}' required>
            {{this.title}}
            {{this.creator}}
        </option>
        {{/each}}
    </select>

    <label for='create_genre_id'>Genre: </label>
     <select name='create_genre_id' id='create_genre_id'>
        <option value='NULL' selected>None </option>
        {{#each genres}}
        <option value='{{this.id_genre}}' required>
            {{this.description}}
        </option>
        {{/each}}
    </select>

     <button type="submit">Create</button>
    </form>

{{! UPDATE form}}

<h2>Update media-genre relationship</h2>
    <form class="cuForm" id="update_media_genre_form" method="POST" action="/Media_Has_Genres/update">
    <label for="update_id">Media to update:</label>
    <select name="update_id" id="update_id" required>
        <option value="" disabled selected>Select Media to update</option>
        {{#each media_genres}}
        <option value="{{this.id_media}}">
            {{this.title}} (Current Genre: {{this.genre}})
        </option>
        {{/each}}
    </select>

    <label for="new_media_genre">New genre:</label>
    <select name="new_media_genre" id="new_media_genre" required>
        <option value="" disabled selected>Select new genre</option>
        {{#each genres}}
        <option value="{{this.id_genre}}">
            {{this.description}}
        </option>
        {{/each}}
    </select>

    <button type="submit">Update</button>
</form>
